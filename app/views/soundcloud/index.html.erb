<!-- SOUNDCLOUD IFRAME -->
<div id="container">
  
  <iframe id="sc-widget" src=<%= "https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/190913112?client_id=#{ENV['SOUNDCLOUD_CLIENT_ID']}" %> width="500" height="170" scrolling="no" frameborder="no"></iframe>

  <div id="questions" class="hidden">
    <p>Which color do you imagine?</p>
    <div id="square-1" class="square" onclick="addSquareColor('#AEE5F1')"></div>
    <div id="square-2" class="square" onclick="addSquareColor('#F25239')"></div>
    <div id="square-3" class="square" onclick="addSquareColor('#B3BCBF')"></div>
    <div id="square-4" class="square" onclick="addSquareColor('#FEBBCD')"></div>
  </div>

  <div id="dream-tile">
    <div id="answer-square-1" class="answer-square"></div>
    <div id="answer-square-2" class="answer-square"></div>
    <div id="answer-square-3" class="answer-square"></div>
    <div id="answer-square-4" class="answer-square"></div>
  </div>

</div>




<script type="text/javascript">

var clickCount = 1;

function addSquareColor(color){
  console.log("ran addSquareColor")
  console.log(clickCount.toString())
  console.log('#answer-square-' + clickCount.toString())
  $('#answer-square-' + clickCount.toString()).css({"borderBottomColor":color});
}

  $('.square').click(function(){
    $('#questions').addClass('hidden');
    clickCount += 1;
    console.log(clickCount)
  })

	var widgetIframe = document.getElementById('sc-widget'),
  widget       = SC.Widget(widgetIframe);

  function position(){
  	widget.getPosition(function(positionSC){
  		console.log(Math.round(positionSC));
  	});
  }

  var track_position = "";
	widget.bind(SC.Widget.Events.PLAY_PROGRESS, function(eventData) {
            track_position = JSON.stringify(eventData.currentPosition);
            track_position = Math.floor(track_position/100);
            console.log(track_position);
            if ((track_position == 40) || (track_position == 100) || (track_position == 160) || (track_position == 200)){
            	$('#questions').removeClass('hidden');
            };
          });
</script>